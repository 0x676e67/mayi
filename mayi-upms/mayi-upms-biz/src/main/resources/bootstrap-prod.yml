spring:
  datasource:
    url: jdbc:mysql://mayi.mysql:3306/master?useSSL=true&useUnicode=true&characterEncoding=utf-8&allowMultiQueries=true&autoReconnect=true&failOverReadOnly=false&maxReconnects=10&serverTimezone=GMT
    username: root
    password: itcast
    driver-class-name: com.mysql.cj.jdbc.Driver
    type: com.alibaba.druid.pool.DruidDataSource            #alibaba连接池
    druid:
      initial-size: 10                                      #初始化建立10条链接
      max-active: 30                                        #最多二十条
      min-idle: 5                                           #最小连接数量
      max-wait: 60000                                       #获取连接时最大等待时间
      time-between-eviction-runs-millis: 60000              #连接有效性检测时间
      min-evictable-idle-time-millis: 300000                #连接在池中最小生存的时间
      max-evictable-idle-time-millis: 900000                #连接在池中最大生存的时间
      test-while-idle: true
      test-on-borrow: false
      test-on-return: false
      validation-query: select 1                            #检测连接是否有效
      webStatFilter:                                        #配置监控统计
        enabled: true
      stat-view-servlet:
        enabled: true
        url-pattern: /druid/*
        reset-enable: false
        #配合filter开启iframe
        allow:
      filter:
        stat:
          enabled: true
          log-slow-sql: true                                #记录慢SQL
          slow-sql-millis: 1000
          merge-sql: true
        wall:
          config:
            multi-statement-allow: true
      aop-patterns: com.zf1976.mayi.*.endpoint.*

  #Redis
  redis:
    host: mayi.redis
    password:
    port: 6379
    database: 0
    timeout: 5000
    jedis:
      pool:
        max-wait: 10
        max-active: 32
        min-idle: 2
  #Nacos
  cloud:
    nacos:
      config:
        file-extension: yaml
        config-retry-time: 1000
        max-retry: 20
        config-long-poll-timeout: 1000
      discovery:
        heart-beat-timeout: 5000
        heart-beat-interval: 3000
        ip-delete-timeout: 600000 #one minute
      server-addr: mayi.nacos:8848

  #admin监控注册
  boot:
    admin:
      client:
        url: http://mayi.visual.admin:4444
        username: admin
        password: 123456

  security:
    oauth2:
      resourceserver:
        resource-id: mayi-upms-biz
        jwt:
          issuer-uri: http://mayi.auth:9000
          jwk-set-uri: http://mayi.auth:9000/oauth/token_key
          jwt-check-uri: http://mayi.auth:9000/oauth/check_token
        opaquetoken:
          client-id: system
          client-secret: 123456
security:
  # logout url
  logout-url: http://mayi.gateway:8888/oauth/logout